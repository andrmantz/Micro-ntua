IN 10H
LXI H,0900H 	;ARXIKH ADDRESS 0900
MVI A,FFH 	;O A PERIEXEI TO 255 

LOOP1:
	MOV M,A 	;APOTHIKEUSI TOY ARITHMOU STON HL
	DCR A 		;NEXT NUMBER
	INX H 		;NEXT ADDRESS
	MOV M,A 	;HL)=NEXT NUMBER
	CPI 00H 	
	JNZ LOOP1 	;OSO DIAFORO TO 0, SUNEXIZE NA BAZEIS ARITHMOUS

;B ERWTHMA 
	LXI D,0008H 	;ARIKOPOISI TOU DE 0008H, EPEIDI TO 0 EXEI 8 MIDENIKA
	MVI A,00H 	
	MVI B,00H
	MVI C,00H 

NEXT_NUM:
	MOV A,B 	
	MVI C,00H 	;KRATA TO PLHTHOS TWN BIT POU CHECKARISTHKAN GIA TO AN EINAI 1 H 0
	INR A 		;NEXT NUMBER
	MOV B,A 	;SAVE A
	CPI FFH 	;IF NUMBER = 255 THEN FINISH
	JNZ CHECKBITS 	;ELSE CHECK THE NUMBER
	JZ THIRD 	;TELOS B ERWTHMATOS


CHECKBITS:
	INR C 		;C = CURRENT BIT
	MOV A,C 	
	CPI 09H 	;IF C =09H, NUM IS OVER
	MOV A,B 	
	JNZ FINDZEROS 	;ELSE CONTINUE
	JZ NEXT_NUM 	

FINDZEROS:
	RAR 		;CY = LSB
	JC CHECKBITS 	;IF CY = 1 CHECK NEXT BIT
	INX D 		;ELSE WE HAVE ZERO 
	JNC CHECKBITS 	;CHECK THE NEXT BIT


THIRD:
	MVI C,01H 	
	MVI B,20H 	;PLHTHOS ARITHMWN

CALCULATE:
	INR B		;NEXT NUMBER
	INR C 		;PLHTHOS=PLHTHOS+1
	MOV A,B
	CPI 70H 		;IF B=70H FINISH
	JNZ CALCULATE 	;ELSE CONTINUE CALCULATING 
	RST 1
END